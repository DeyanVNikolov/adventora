{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load crispy_forms_tags %}
{% block content %}


    {#    <div class="has-text-centered">#}
    {#        {% if hotel == None %}#}
    {#            Нямате хотел.#}
    {##}
    {#            Регистрирайте нов тук: <a href="{% url 'register-hotel' %}">Регистрация</a>#}
    {##}
    {#        {% else %}#}
    {##}
    {#            {% if hotel.approved == True %}#}
    {#                Вашият хотел очаква одобрение, това може да отнеме до 2 работни дни.<br<br>#}
    {#                Ако желаете да промените данните за хотела си, моля свържете се с нас в страницата за <a href="{% url 'contact' %}">контакти</a>.#}
    {#                {% else %}#}
    {##}
    {#            Имате хотел#}
    {#            <br><br>#}
    {#            <button class="button is-primary" onclick="window.location.href='/hotel/dashboard/{{ hotel.uid }}'">Детайли</button>#}
    {#        {% endif %}#}
    {#        {% endif %}#}
    {#    </div>#}

    {% block addhead %}


    {% endblock %}

    <p style="display: none">
        {% block show %}true;{% endblock %}
    </p>

    <script>
        // add tags has-aside-left has-aside-mobile-transition has-navbar-fixed-top has-aside-expanded to html
        document.getElementsByTagName("html")[0].classList.add("has-aside-left", "has-aside-mobile-transition", "has-navbar-fixed-top", "has-aside-expanded");
    </script>
    <style>
        .container.is-fluid {
            padding: 0;
        }
    </style>
    <div id="app" style="padding-left: 15px; padding-right: 15px">

        {% include "hotel/hotel_base.html" %}
        <section class="section is-title-bar">
            <div class="level">
                <div class="level-left">
                    <div class="level-item">
                        <ul>
                            <li>{% trans "Admin" %}</li>
                            <li>{% trans "Dashboard" %}</li>
                            <li>{% trans "Room" %}</li>
                            <li>{{ room.number }}</li>
                        </ul>
                    </div>
                </div>
                <div class="level-right">
                    <div class="level-item">
                        <div class="buttons is-right">
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="hero is-hero-bar">
            <div class="hero-body">
                <div class="level">
                    <div class="level-left">
                        <div class="level-item">
                            <h1 class="title">
                                <style>
                                    #div_id_luxuries {
                                        display: flex;
                                        flex-wrap: wrap;
                                    }
                                    
                                    #div_id_luxuries > label {
                                        flex: 0 0 100%;
                                    }

                                    {#make #div_id_luxuries > .control to be on own row #}

                                    #div_id_luxuries .control {
                                        flex: 0 0 20%; /* Each control takes up 20% of the container width */
                                        box-sizing: border-box;
                                        padding: 5px; /* Adjust as necessary for spacing */
                                    }

                                    /* You may also want to ensure the checkboxes align nicely if the texts vary in length */
                                    #div_id_luxuries .control .checkbox {
                                        white-space: nowrap;
                                        overflow: hidden;
                                        text-overflow: ellipsis;
                                    }
                                </style>
                                {% trans "Room" %} {{ room.number }}
                                <script>
                                    function deleteroom() {
                                        let roomid = '{{ room.id }}';
                                        let hotelid = '{{ hotel.id }}';

                                        r = confirm("Сигурни ли сте, че искате да изтриете стаята? Това действие е необратимо.");
                                        if (r === true) {

                                            let buttonava = document.getElementById("ava");
                                            let buttontbc = document.getElementById("tbc");
                                            let buttonocc = document.getElementById("occ");

                                            buttontbc.disabled = true;
                                            buttonocc.disabled = true;
                                            buttonava.disabled = true;

                                            buttonava.classList.add("is-loading");
                                            buttontbc.classList.add("is-loading");
                                            buttonocc.classList.add("is-loading");

                                            let deletebutton = document.getElementById("deletebutton");
                                            deletebutton.disabled = true;
                                            deletebutton.classList.add("is-loading");



                                            window.location.href = "/hotel/dashboard/" + hotelid + "/rooms/" + roomid + "/delete/";
                                        }
                                    }
                                </script>
                                <button onclick="deleteroom()" class="button is-danger" type="button" id="deletebutton">

                                    <span class="icon"><i style="font-size: 20px" class="mdi mdi-delete"></i></span>
                                </button>
                                <button onclick="window.location.href='/hotel/dashboard/{{ hotel.id }}/rooms/{{ room.id }}/edit'" class="button is-info" type="button" id="deletebutton">

                                    <span class="icon"><i style="font-size: 20px" class="mdi mdi-pencil-box"></i></span>
                                </button>
                                &nbsp;

                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    {% if hotel %}
        {% if hotel.approved == True %}
            <section class="section is-main-section">
                {% crispy form %}
            </section>
        {% else %}
            <br><br><br>
            <div class="container is-fluid has-text-centered">
                <h1 class="title is-1">{% trans "Your hotel is not yet approved. Allow us to confirm your info within 48 hours." %}</h1>
            </div>
        {% endif %}
    {% else %}
        <br><br><br>
        <div class="container is-fluid has-text-centered">
            <h1 class="title is-1">{% trans "You don't have a hotel" %}</h1>
            <br><br>
            <button class="button is-primary" onclick="window.location.href='{% url 'register-hotel' %}'">{% trans "Register Hotel" %}</button>
        </div>

    {% endif %}
    </div>


{% endblock %}
